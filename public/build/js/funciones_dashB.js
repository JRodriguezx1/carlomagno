export function sidebar(){document.querySelector(".logo").addEventListener("click",e=>{"menu-barra"===e.target.alt&&(document.querySelector(".sidebar-nav").classList.toggle("mostrar"),document.querySelector(".menu").classList.toggle("mostrar"),document.querySelector(".menux").classList.toggle("mostrar")),e.target.classList.contains("menux")&&(document.querySelector(".sidebar-nav").classList.toggle("mostrar"),document.querySelector(".menu").classList.toggle("mostrar"),document.querySelector(".menux").classList.toggle("mostrar"))})}export function eliminaralerta(){document.querySelector(".exito")&&setTimeout(()=>{document.querySelector(".exito").remove()},3e3)}export function contar_chart(){document.querySelectorAll(".campo-contchart").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let o=t.target.value.slice(0,e.dataset.num);console.log(o),t.target.value=o,e.textContent=0}})})}export function deletefotografia(){const e=document.querySelectorAll(".btn-vaciarimg a");console.log(e),e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},title:"Desea eliminar la fotografia?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(Swal.fire("Fotografia eliminada","","success"),"I"==e.target.tagName?window.location=e.target.parentElement.href:window.location=e.target.href)})})})}export function filtro_personalizado(){const e=document.querySelector("#filtros-personalizado");if(e){const t=document.querySelector("#selectprogramas");e.addEventListener("click",()=>{let e=t.options[t.options.selectedIndex].value;Swal.fire({customClass:{},title:"Consulta de estudiantes!",html:'<form class="modalform" action="/admin/dashboard/admin_estudiantes/filtro_personalizado?pagina=1" method="POST">    \n                            <div>\n                                <label for="nivel">Semestre/nivel:</label>\n                                <div>\n                                    <select id="nivel" name="idnivel" required>\n                                        <option value="" disabled selected>-- Seleccione Semestre --</option>    \n                                    </select>\n                                </div>\n                            </div>\n\n                            <div>\n                                <label for="nivel">Grupo:</label>\n                                <div>\n                                    <select id="grupo" name="idgrupo" required>\n                                        <option value="" disabled selected>-- Seleccione grupo --</option>    \n                                    </select>\n                                </div>\n                            </div>\n                            <input class="filter-consulta" type="submit" value="Consultar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1});const o=document.querySelector("#nivel"),n=document.querySelectorAll("#grupo");traerniveles(e,o),o.addEventListener("change",e=>{traer_grupos_sedes(e.target.value,n,0)})})}}export function cambiodebtn(){const e=document.querySelectorAll("#filtro");e.forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("plus_btn")||(e.forEach(e=>{e.classList.remove("plus_btn")}),t.target.classList.add("plus_btn"))})})}export function validarsubmitoferta(){const e=document.querySelectorAll("#eliminar-oferta");e&&e.forEach(e=>{e.addEventListener("submit",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"ELIMINARA El PROGRAMA DEL LA PAGINA WEB.",title:"Desea eliminar la oferta",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&e.target.submit()})})})}export function validarsubmitprograma(){const e=document.querySelector("#eliminar-registro");e&&e.addEventListener("submit",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"NO DEBE HABER ESTUDIANTES EN EL PROGRAMA!. TAMBIEN SE ELIMINARAN LOS GRUPOS.",title:"Desea eliminar el registro completo?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&e.target.submit()})})}export function validarsubmitusers(){const e=document.querySelectorAll("#eliminar-users");e&&e.forEach(e=>{e.addEventListener("submit",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"ELIMINARA AL USUARIO COLABORADOR DE LA BASE DE DATOS.",title:"Desea eliminar el registro completo?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&e.target.submit()})})})}export function validarsubmitestudiante(){const e=document.querySelectorAll("#eliminar-registro-estudiante");e&&e.forEach(e=>{e.addEventListener("submit",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"SE PERDERA TODA LA INFORMACION DEL ESTUDIANTE CONTENIDO EN EL SISTEMA!",title:"Desea eliminar el registro completo?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&e.target.submit()})})})}export function accion_checkbox(){const e=document.querySelector("#activar-input");e&&e.addEventListener("change",(function(){this.checked?(this.parentElement.nextElementSibling.disabled=!1,document.querySelector("#selectestadogrupo").disabled=!1,document.querySelector("#sede").disabled=!1,document.querySelector("#nombregrupo").disabled=!1,document.querySelector("#detallegrupo").disabled=!1,document.querySelector("#idprograma").disabled=!1,document.querySelector("#selectgrupo").options.selectedIndex&&(document.querySelector(".btn-eliminargrupo").style.display="block")):(this.parentElement.nextElementSibling.disabled=!0,document.querySelector("#selectestadogrupo").disabled=!0,document.querySelector("#sede").disabled=!1,document.querySelector("#nombregrupo").disabled=!0,document.querySelector("#detallegrupo").disabled=!0,document.querySelector("#idprograma").disabled=!0,document.querySelector(".btn-eliminargrupo").style.display="none")}))}export function accion_barra_prog_new_student(){const e=document.querySelectorAll(".barra-nuevo-registro i");e&&e.forEach((e,t)=>{e.addEventListener("click",e=>{document.querySelectorAll(".desplegardiv").forEach((e,o)=>{t===o&&e.classList.toggle("activar-desplegardiv")})})})}export function agregarsemestre(){const e=document.querySelector(".btn_nivel");if(e){const t=document.querySelector(".niveles");let o=1;e.addEventListener("click",e=>{let n=e.target.parentElement.nextElementSibling.cloneNode(!0);console.log(n.children[1].name=`niveles[nombrenivel${++o}]`),t.appendChild(n)})}}export function selectprograma(){const e=document.querySelectorAll(".selectprograma");if(e){const t=document.querySelectorAll(".selectgrupo-crear-ver .selectgrupo");e.forEach((e,o)=>{e.addEventListener("change",(function(e){let n=e.target.value;for(t[o].disabled=!1;t[o].firstChild;)t[o].removeChild(t[o].firstChild);traergrupos(n).then(e=>{e.forEach(e=>{if("Final"!=e.sede.ciudad){const n=document.createElement("option");n.textContent=e.nombregrupo+"-"+e.nombrenivel.nombrenivel+"-"+e.sede.ciudad,n.value=e.id,t[o].appendChild(n)}})})}))})}}async function traergrupos(e){const t=new FormData;t.append("idprograma",e);try{const e="http://mvc_carlomagno.com.co.test/apitraergrupos",o=await fetch(e,{method:"POST",body:t}),n=await o.json();return console.log(n),n}catch(e){console.log(e)}}export function selectgrupo(){const e=document.querySelector("#selectgrupo");e&&e.addEventListener("change",(async function(e){document.querySelector(".btn-eliminargrupo").style.display="block";const t=new FormData;t.append("id",e.target.value);try{const e="http://mvc_carlomagno.com.co.test/apigrupo",o=await fetch(e,{method:"POST",body:t}),n=await o.json(),r=document.querySelector("#sede"),a=document.querySelector("#selectestadogrupo"),l=document.querySelector("#nombregrupo"),c=document.querySelector("#detallegrupo"),i=document.querySelector(".estudiantesxgrupo"),s=document.querySelector(".btn-eliminargrupo a");for(let e=0;e<r.options.length;e++)r.options[e].value==n.idsede&&(r.options[e].selected=!0);for(let e=0;e<a.options.length;e++)a.options[e].value==n.estado&&(a.options[e].selected=!0);l.value=n.nombregrupo,c.value=n.detallegrupo,i.textContent=n.cantidad_estud,s.href="/admin/dashboard/admin_programas/actualizar/eliminar_grupo?id="+n.id,s.onclick=eliminargrupo}catch(e){console.log(e)}}))}function eliminargrupo(e){e.preventDefault(),console.log(e.target.parentElement.href),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"NO DEBE HABER ESTUDIANTES EN EL GRUPO!",title:"Desea eliminar el Grupo?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(window.location=e.target.parentElement.href)})}export function selectnivel(){const e=document.querySelectorAll("#selectnivel");e&&e.forEach((e,t)=>{if(t>0){const t=document.querySelector(".inputnivel");e.addEventListener("change",(function(e){t.value=e.target.options[this.options.selectedIndex].textContent}))}})}export function traermatricula(){const e=document.querySelector("#selectmatricula");e&&e.addEventListener("change",async e=>{console.log(e.target.value),document.querySelector("input[type=submit]").disabled=!1,document.querySelector(".nombre-programa label").textContent=e.target.options[e.target.options.selectedIndex].textContent;const t=new FormData;t.append("id",e.target.value);try{const e=await fetch("http://mvc_carlomagno.com.co.test/apitraermatricula",{method:"POST",body:t}),o=await e.json();console.log(o),document.querySelector("#fecha_inicio").value=o.fecha_inicio,document.querySelector("#fecha_finalizacion").value=o.fecha_fin,document.querySelector("#nmatricula").value=o.id,document.querySelector("#idcoordinador").value=o.idcolaborador,document.querySelector("#nombrecoordinador").value=o.nombrecolaborador+" "+o.apellidocolaborador,document.querySelector("#nivel").value=o.nivel,document.querySelector("#grupo").value=o.nombregrupo+"-"+o.ciudad;const n=document.querySelector("#estadomatricula").options;for(let e=1;e<5;e++)n[e].textContent===o.estado&&(n[e].selected=!0);document.querySelector("#observacion").value=o.observacion}catch(e){console.log(e)}})}export function cambiogrupo(){const e=document.querySelector("#activar-cambioprograma");e&&e.addEventListener("change",(function(){this.checked?this.parentElement.nextElementSibling.disabled=!1:(this.parentElement.nextElementSibling.disabled=!0,document.querySelector("#selectcambiogrupo").disabled||(document.querySelector("#selectcambiogrupo").disabled=!0))}))}export function selectpagoidmatricula(){const e=document.querySelector("#selectpagoidmatricula");e&&e.addEventListener("change",e=>{document.querySelector(".idmatricula").textContent=e.target.value})}export function cambio_niveles(){const e=document.querySelector("#nivel_programas"),t=document.querySelectorAll("#nivel_semestres"),o=document.querySelectorAll("#nivel_grupos");e&&(e.addEventListener("change",(function(e){for(;o[0].firstChild;)o[0].removeChild(o[0].firstChild);traerniveles(e.target.value,t[0])})),t.forEach((e,t)=>{e.addEventListener("change",e=>{traer_grupos_sedes(e.target.value,o,t)})}))}async function traerniveles(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);const o=new FormData;o.append("id_programa",e);try{const e=await fetch("/api/traer_niveles",{method:"POST",body:o}),n=await e.json(),r=document.createElement("option");r.textContent="-- Seleccione --",r.value="",r.disabled=!0,r.selected=!0,t.appendChild(r),n.forEach(e=>{const o=document.createElement("option");o.textContent=e.nombrenivel,o.value=e.id,t.appendChild(o)})}catch(e){console.log(e)}}async function traer_grupos_sedes(e,t,o){for(;t[o].firstChild;)t[o].removeChild(t[o].firstChild);const n=new FormData;n.append("id_nivel",e);try{const e=await fetch("/api/traer_grupos_sedes",{method:"POST",body:n}),r=await e.json();console.log(r);const a=document.querySelector("#idsede");let l=null;a&&(l=a.value),r.forEach(e=>{if(!o||o&&e.idsede==l||1==e.idsede&&l){const n=document.createElement("option");n.textContent=e.nombregrupo+"-"+e.sede,n.value=e.id,t[o].appendChild(n)}})}catch(e){console.log(e)}}export function selectall(){const e=document.querySelector("#selectall"),t=document.querySelectorAll('input[type="checkbox"]');let o=!1;e&&e.addEventListener("click",()=>{t.forEach(e=>e.checked=o),o?(e.style.color="#3d72fc",o=!1):(e.style.color="#585858",o=!0)})}export function confirmar_cn(){const e=document.querySelector("#form-update-nivel");e&&e.addEventListener("submit",e=>{e.preventDefault(),Swal.fire({customClass:{confirmButton:"sweetbtn",cancelButton:"sweetbtn"},text:"SE Actualizara el semestre o nivel academico de los estudiantes!",title:"Desea realizar el cambio?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&e.target.submit()})})}export function graficoprogramas(){if(document.querySelector("#programas-grafica")){!async function(){const e=await fetch("/api/programas"),t=await e.json();let o=["#ea580c","#84cc16","#22d3ee","#a855f7","#ef4444","#14b8a6","#db2777","#e11d48","#7e22ce"];for(let e=0;e<t.length-9;e++)o=[...o,o[e]];const n=document.getElementById("programas-grafica").getContext("2d");new Chart(n,{type:"bar",data:{labels:t.map(e=>e.nombre),datasets:[{label:"# of Votes",data:t.map(e=>e.total),backgroundColor:o}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}()}}export function graficagruposprogram(){const e=document.querySelector("#grafica-selectprograma");let t;if(e){const o=document.getElementById("grupos-grafica").getContext("2d");e.addEventListener("change",(function(e){let n=e.target.value,r=["#ea580c","#84cc16","#22d3ee","#a855f7","#ef4444","#14b8a6","#db2777","#e11d48","#7e22ce"];traergrupos(n).then(e=>{console.log(e);for(let t=0;t<e.length-9;t++)r=[...r,r[t]];t&&t.destroy(),t=new Chart(o,{type:"bar",data:{labels:e.map(e=>e.nombregrupo),datasets:[{label:"# of Votes",data:e.map(e=>e.id),backgroundColor:r}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})})}))}}